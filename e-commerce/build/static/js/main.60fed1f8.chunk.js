(this["webpackJsonpe-commerce"]=this["webpackJsonpe-commerce"]||[]).push([[0],{22:function(t,e,c){},30:function(t,e,c){"use strict";c.r(e);var n=c(0),r=c.n(n),a=c(11),i=c.n(a),o=(c(22),function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,31)).then((function(e){var c=e.getCLS,n=e.getFID,r=e.getFCP,a=e.getLCP,i=e.getTTFB;c(t),n(t),r(t),a(t),i(t)}))}),s=c(7),d=c(12),j=c(2),u=c(6),l="ADD_TO_CART",b="REMOVE_FROM_CART",O="REMOVE_ALL",h="SET_PRODUCTS_TO_PAGE",f=function(t){return{type:l,payload:{id:t}}},m=c(1);var p=Object(u.b)(null,(function(t){return{addToCart:function(e){return t(f(e))}}}))((function(t){var e=t.productData,c=t.addToCart;return Object(u.c)(),Object(m.jsxs)("div",{className:"productItem",children:[Object(m.jsx)("h3",{children:e.id}),Object(m.jsx)("div",{children:e.name}),Object(m.jsxs)("div",{children:["$",e.rating]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{onClick:function(){return c(e.id)},children:"Add to Cart"})})]})}));function x(t){var e=t.products;return Object(m.jsxs)("main",{children:[Object(m.jsx)("p",{className:"subtitle",children:"Products"}),Object(m.jsx)("div",{className:"product",children:e.map((function(t){return Object(m.jsx)(p,{productData:t},t.id)}))})]})}var v=function(t){var e=t.products;return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)(x,{products:e})})})};var y=Object(u.b)((function(t){return{cart:t.cart.cart}}),(function(t){return{addToCart:function(e){return t(f(e))},removeFromCart:function(e){return t({type:b,payload:{id:e}})},removeAll:function(){return t({type:O,payload:{item:[]}})}}}))((function(t){var e=t.cart,c=t.addToCart,n=t.removeFromCart,r=t.removeAll;return Object(u.c)(),Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{className:"textCenter",children:"Cart Items"}),Object(m.jsx)("hr",{}),Object(m.jsx)("div",{className:"row",children:0===e.length&&Object(m.jsx)("div",{children:" Cart is Empty "})}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{children:e.map((function(t,e){return Object(m.jsxs)("div",{className:"rowUpgrade",children:[Object(m.jsx)("div",{children:t.name}),Object(m.jsxs)("div",{children:[Object(m.jsx)("button",{onClick:function(){return c(t.id)},className:"buttonAdd",children:"+"}),Object(m.jsx)("button",{onClick:function(){return n(t.id)},className:"buttonRemove",children:"-"})]}),Object(m.jsxs)("div",{className:"textRight",children:[t.quantity," x"]})]},e)}))})}),Object(m.jsx)("div",{className:"row",children:0!==e.length&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{children:Object(m.jsx)("button",{onClick:function(){return r()},children:"Clear all"})}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("button",{onClick:function(){return alert("Checkout")},children:"Checkout"})})]})})]})})),g=function(){var t=Object(n.useState)([]),e=Object(s.a)(t,2),c=e[0],r=e[1];return Object(n.useEffect)((function(){fetch("https://retoolapi.dev/3scGq6/products").then((function(t){t.ok?t.json().then((function(t){r(t)})):console.log("no result")})).catch((function(t){console.log("Error:",t)}))}),[]),[c,r]};var C=Object(u.b)((function(t){return{cart:t.cart.cart}}),(function(t){return{setProductsToPage:function(e){return t(function(t){return{type:h,payload:{item:t}}}(e))}}}))((function(t){var e=t.cart,c=t.setProductsToPage,r=g(),a=Object(s.a)(r,2),i=a[0],o=(a[1],Object(n.useState)(0)),u=Object(s.a)(o,2),l=u[0],b=u[1];return Object(n.useEffect)((function(){var t=0;e.forEach((function(e){t+=e.quantity})),b(t),localStorage.setItem("cartItems",JSON.stringify(e))}),[e,l]),c(i),Object(m.jsx)(d.a,{children:Object(m.jsxs)("header",{children:[Object(m.jsxs)("div",{className:"header",children:[Object(m.jsx)("div",{children:Object(m.jsx)(d.b,{className:"title",to:"/",children:"Shopping Cart"})}),Object(m.jsx)("div",{children:Object(m.jsxs)(d.b,{to:"/cart",children:["Cart"," ",Object(m.jsx)("button",{className:"buttonBadge",children:Object(m.jsx)("span",{children:e.length})})]})})]}),Object(m.jsxs)(j.c,{children:[Object(m.jsx)(j.a,{exact:!0,path:"/",element:Object(m.jsx)(v,{products:i})}),Object(m.jsx)(j.a,{path:"/cart",element:Object(m.jsx)(y,{cartItems:e})})]})]})})})),N=c(8),T=c(17),S=c(4),E={products:[],cart:localStorage.getItem("cartItems")?JSON.parse(localStorage.getItem("cartItems")):[]},I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case h:return Object(S.a)(Object(S.a)({},t),{},{products:e.payload});case l:var c=t.products.item.find((function(t){return t.id===e.payload.id})),n=t.cart.find((function(t){return t.id===e.payload.id}));return Object(S.a)(Object(S.a)({},t),{},{cart:n?t.cart.map((function(t){return t.id===e.payload.id?Object(S.a)(Object(S.a)({},t),{},{quantity:t.quantity+1}):t})):[].concat(Object(T.a)(t.cart),[Object(S.a)(Object(S.a)({},c),{},{quantity:1})])});case b:t.products.item.find((function(t){return t.id===e.payload.id}));var r=t.cart.find((function(t){return t.id===e.payload.id}));return Object(S.a)(Object(S.a)({},t),{},{cart:1===r.quantity?t.cart.filter((function(t){return t.id!==e.payload.id})):t.cart.map((function(t){return t.id===e.payload.id?Object(S.a)(Object(S.a)({},t),{},{quantity:t.quantity-1}):t}))});case O:return Object(S.a)(Object(S.a)({},t),{},{cart:[]});default:return t}},k=Object(N.combineReducers)({cart:I}),A=c(16),q=Object(N.createStore)(k,Object(A.composeWithDevTools)());i.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(u.a,{store:q,children:Object(m.jsx)(C,{})})}),document.getElementById("root")),o()}},[[30,1,2]]]);
//# sourceMappingURL=main.60fed1f8.chunk.js.map